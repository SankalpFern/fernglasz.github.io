<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<title>{{ if not .IsHome }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>

	<link rel="stylesheet" href="/css/style.css" type="text/css" media="all" />
	<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

	{{ with .OutputFormats.Get "rss" -}}
		{{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
	{{ end -}}

	<script>
		if (window.self !== window.top) {  // Check if we're in an iframe
		  // Intercept all link clicks
		  document.addEventListener('click', function(event) {
			if (event.target.tagName === 'A' && event.target.href) {
			  event.preventDefault(); // Prevent default navigation
			  const link = new URL(event.target.href);
			  
			  if (link.origin === window.location.origin) {
				// Internal link
				const path = link.pathname + link.search + link.hash;
				window.parent.postMessage({ type: 'navigation', path: path }, 'https://www.alphantech.fyi');
			  } else {
				// External link
				window.parent.postMessage({ type: 'externalNavigation', url: event.target.href }, 'https://www.alphantech.fyi');
			  }
			}
		  });
		
		  // Listen for navigation events from parent
		  window.addEventListener('message', function(event) {
			if (event.origin === 'https://www.alphantech.fyi' && event.data.type === 'navigate') {
			  history.pushState(null, '', event.data.path);
			  // Trigger a custom event that your Hugo site can listen to for content updates
			  window.dispatchEvent(new CustomEvent('internalNavigation', { detail: event.data.path }));
			}
		  });
		}
		</script>
</head>

<body>

{{ partial "nav.html" . }}

<main class="content">
